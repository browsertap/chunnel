#!/usr/bin/env node
optimist = require("optimist")
client   = require("..").client

argv = optimist.
usage('Usage: $0 [port] [domain]').
demand(["server"]).
default("server", "127.0.0.1:9526").
argv


var portOrProxy = String(argv._.shift()) || "localhost:8080",
domain = argv._.shift() || "localhost",
proxy;

if(~portOrProxy.indexOf(":")) {
  proxy = portOrProxy;
} else {
  proxy = "127.0.0.1:" + portOrProxy;
}


client.connect({
  server: argv.server,
  domain: domain,
  proxy: proxy
})

